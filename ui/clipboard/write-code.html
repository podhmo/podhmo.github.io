<!DOCTYPE html>
<html lang="ja" data-theme="dark">

<head>
  <title>copy code</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- style -->
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <style>
    pre {
      padding: 1em;
    }

    .code {
      position: relative;
      padding-right: 2em;
      /* ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
    }

    .code::after {
      content: "ğŸ“‹";
      position: absolute;
      top: 0;
      right: 0;
      cursor: pointer;
      font-size: 1.5em;
      padding: 0.25em;
    }
  </style>
</head>

<body>
  <main class="container">
    <h1>copy code</h1>
    <p>
      ã‚ˆãã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®è„‡ã«ã‚ã‚‹ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã®å®Ÿè£…ã€‚
      preã‚¿ã‚°ï¼‘ã¤ã ã‘ã§å®Ÿè£…ã™ã‚‹ãŸã‚ã«getBoundingClientRect()ã‚’ä½¿ã£ã¦ã‚‹ã®ã¯å°‘ã—ãƒˆãƒªãƒƒã‚­ãƒ¼ã€‚
    </p>

    <pre class="code">
      package main
      
      import (
        "fmt"
      )
      
      func main(){
        fmt.Println("Hello, World!")
      }</pre>
    <pre class="code">
oyoyuo</pre>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      for (const pre of document.querySelectorAll('.code')) {
        pre.addEventListener('click', (ev) => {
          const pre = ev.currentTarget;
          const rect = pre.getBoundingClientRect();
          const iconSize = 32; // ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚µã‚¤ã‚ºï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰

          // ã‚¯ãƒªãƒƒã‚¯ä½ç½®ãŒå³ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³é ˜åŸŸå†…ã«ã‚ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®š
          if (ev.clientX >= rect.right - iconSize && ev.clientY <= rect.top + iconSize) {
            const text = pre.innerText;
            navigator.clipboard.writeText(text).then(() => {
              alert('Copied to clipboard');
            }).catch(err => {
              console.error('Failed to copy: ', err);
            });
          }
        });
      }
    });
  </script>

</body>

</html>