# ESM Import Finder

`ESM Import Finder` は、開発者がCDN上でホストされているNPMパッケージをESM (ECMAScript Modules)として利用する際に、適切な`import`文を迅速に見つけ出すためのクライアントサイドWebツールです。

このツールを使えば、ライブラリのドキュメントを深く読み込まなくても、動的な試行錯誤を通じて、必要なコードスニペット、エクスポート情報、関連リンクを瞬時に手に入れることができます。

## ✨ 主な機能

*   **自動的な`import`文の探索**:
    *   指定されたライブラリ名から、主要なCDN（`esm.sh`, `jsDelivr`, `unpkg`）上で利用可能なESMのURLを探索します。
    *   モダンな`import()`構文を駆使し、ライブラリのルートURLや`package.json`に記載されたESMエントリポイントを自動で試行します。

*   **分かりやすい結果表示**:
    *   探索の成功・失敗の過程をリアルタイムでログ表示します。
    *   成功時には、コピー可能な`import`文を複数パターン（デフォルト、名前付き、すべて）で提示します。

*   **エクスポートシンボルの可視化**:
    *   ライブラリがどのシンボルをエクスポートしているか（`default`エクスポートと名前付きエクスポート）を一覧で表示します。これにより、ライブラリのAPI概要を素早く把握できます。

*   **豊富な関連情報**:
    *   `package.json`を解析し、プロジェクトのホームページやGitリポジトリへのリンクを自動で抽出・表示します。
    *   CDN上のファイル一覧へ直接アクセスできるリンクも提供し、手動での詳細確認もサポートします。

*   **高度な入力形式**:
    *   `react:useState`のように、コロン区切りで特定のシンボルを指定することで、そのシンボルを含む`import`文を優先的に生成します。

*   **モダンで軽量なUI**:
    *   Pico.css v2を採用し、PCでもモバイルでも見やすい、クリーンでレスポンシブなインターフェースを提供します。
    *   ダークモードにも対応しています。

## 🚀 使い方

このツールはサーバーを必要とせず、ローカルファイルとして直接ブラウザで開くだけで動作します。

1.  **ファイルを開く**:
    *   `index.html` ファイルをダウンロードし、お好きな最新のWebブラウザ（Chrome, Firefox, Edgeなど）で開きます。

2.  **パッケージ名を入力**:
    *   調べたいNPMパッケージの名前を入力します。バージョンを指定することも可能です（例: `lit@3`, `vue@next`）。
    *   特定の関数やコンポーネントのインポート方法を知りたい場合は、`react:useState`のように入力します。

3.  **CDNを選択**:
    *   ドロップダウンリストから、試行したいCDNプロバイダー（`esm.sh`, `jsDelivr`, `unpkg`）を選択します。
    *   **ヒント**: `esm.sh`はESMへの変換機能が強力なため、多くのパッケージで成功しやすい傾向があります。

4.  **探索を開始**:
    *   「探索を開始」ボタンをクリックします。

5.  **結果を確認**:
    *   画面下部に探索のログが表示されます。
    *   探索が成功すると、結果サマリーエリアに「関連情報」「エクスポートシンボル」「推奨されるImport文」などが表示されます。
    *   必要な`import`文を見つけたら、「Copy」ボタンでクリップボードにコピーして、ご自身のプロジェクトに貼り付けてください。

## 🛠️ 仕組み

このツールは、すべてブラウザ上で完結するクライアントサイドJavaScriptによって駆動しています。

1.  **動的`import()`**: モダンブラウザがサポートする`import()`関数を用いて、文字列として与えられたURLからJavaScriptモジュールを非同期に読み込みます。これが探索の核となる技術です。
2.  **`fetch` API**: `package.json`ファイルを取得するために`fetch` APIを使用します。レスポンスの`Content-Type`ヘッダーを検証し、JSONファイルであることを確認してから解析することで、信頼性を高めています。
3.  **ヒューリスティック（探索的発見法）**:
    *   **ステップ1**: まず、`https://[CDN]/[パッケージ名]`という最もシンプルなURLでの直接インポートを試みます。最新のCDNとパッケージでは、これで成功することが多くあります。
    *   **ステップ2**: ステップ1が失敗した場合、`package.json`を取得し、`"module"`フィールドや、よりモダンな`"exports"`フィールド内の`"import"`エントリを探します。見つかったパスをベースURLと結合して、再度`import()`を試みます。
4.  **モジュール解析**: インポートに成功したモジュールオブジェクト（`const module = await import(...)`の`module`）に対し、`Object.keys()`を実行することで、エクスポートされているすべてのシンボル名をリストアップしています。

## ⚠️ 注意事項

*   このツールはオンライン環境での利用が前提です。CDNへのアクセスにインターネット接続が必要です。
*   ライブラリのパッケージング方法やCDNの仕様によっては、ESMモジュールを正しく見つけられない場合があります。
*   本ツールはESM形式のモジュールを対象としており、古い形式（UMD, IIFEなど）でしか提供されていないライブラリの探索には対応していません。
*   セキュリティ上の観点から、信頼できないパッケージに対して使用する際はご注意ください（ただし、`eval()`のような特に危険な機能は使用していません）。
